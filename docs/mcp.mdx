---
title: MCP Server
description: Technical documentation for Context7 MCP Server implementation
---

# MCP Server

Context7 implements the Model Context Protocol (MCP) to provide up-to-date library documentation directly to AI coding assistants.

## Overview

The Context7 MCP Server is a lightweight service that bridges AI assistants with Context7's documentation database. It provides two main tools that work together to fetch relevant, version-specific documentation.

### Server Information

- **Name**: Context7
- **Version**: 1.0.13
- **Protocol**: Model Context Protocol (MCP)
- **Transport**: Supports both `stdio` and `http`

## Available Tools

### 1. resolve-library-id

Resolves a package/product name to a Context7-compatible library ID and returns a list of matching libraries.

#### When to Use

You **MUST** call this function before `get-library-docs` to obtain a valid Context7-compatible library ID, **UNLESS** the user explicitly provides a library ID in the format `/org/project` or `/org/project/version` in their query.

#### Input Schema

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `libraryName` | string | Yes | Library name to search for and retrieve a Context7-compatible library ID |

#### Selection Process

The tool analyzes the query and returns the most relevant match based on:

1. **Name similarity** to the query (exact matches prioritized)
2. **Description relevance** to the query's intent
3. **Documentation coverage** (prioritize libraries with higher Code Snippet counts)
4. **Trust score** (consider libraries with scores of 7-10 more authoritative)

#### Response Format

Each result includes:

- **Library ID**: Context7-compatible identifier (format: `/org/project`)
- **Name**: Library or package name
- **Description**: Short summary
- **Code Snippets**: Number of available code examples
- **Trust Score**: Authority indicator (0-10)
- **Versions**: List of available versions (format: `/org/project/version`)

#### Example Usage

```json
{
  "libraryName": "next.js"
}
```

**Response:**

```
Available Libraries (top matches):

Library ID: /vercel/next.js
Name: Next.js
Description: The React Framework for Production
Code Snippets: 1,234
Trust Score: 10
Versions: ["/vercel/next.js/v14.0.0", "/vercel/next.js/v13.5.0"]
```

### 2. get-library-docs

Fetches up-to-date documentation for a library using a Context7-compatible library ID.

#### When to Use

Call this function after obtaining a library ID from `resolve-library-id`, or when the user provides a library ID directly in the format `/org/project` or `/org/project/version`.

#### Input Schema

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `context7CompatibleLibraryID` | string | Yes | Exact Context7-compatible library ID (e.g., `/mongodb/docs`, `/vercel/next.js`, `/supabase/supabase`) |
| `topic` | string | No | Topic to focus documentation on (e.g., `hooks`, `routing`) |
| `tokens` | number | No | Maximum number of tokens of documentation to retrieve (default: 5000, minimum: 1000) |

#### Response

Returns documentation in plain text format, optimized for AI consumption. The documentation includes:

- API references
- Code examples
- Configuration guides
- Best practices
- Version-specific information

#### Example Usage

```json
{
  "context7CompatibleLibraryID": "/vercel/next.js",
  "topic": "middleware",
  "tokens": 5000
}
```

## Transport Types

Context7 MCP Server supports two transport protocols:

### stdio (Default)

Standard input/output transport for local MCP clients.

**Use case**: Local installations with Cursor, VS Code, Claude Code, etc.

**Configuration example:**

```json
{
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@upstash/context7-mcp", "--api-key", "YOUR_API_KEY"]
    }
  }
}
```

### http

HTTP/HTTPS transport for remote server connections.

**Use case**: Remote deployments, cloud installations, multiple client connections.

**Configuration example:**

```json
{
  "mcpServers": {
    "context7": {
      "url": "https://mcp.context7.com/mcp",
      "headers": {
        "CONTEXT7_API_KEY": "YOUR_API_KEY"
      }
    }
  }
}
```

**Endpoints:**

- `/mcp` - Main MCP endpoint (StreamableHTTP)
- `/sse` - Server-Sent Events endpoint (GET)
- `/messages` - SSE message endpoint (POST)
- `/ping` - Health check endpoint

<Warning>
The Server-Sent Events (SSE) transport protocol is deprecated and its endpoint will be removed in upcoming releases. Please use HTTP or stdio transport methods instead.
</Warning>

## CLI Arguments

The Context7 MCP server accepts the following command-line arguments:

| Argument | Values | Default | Description |
|----------|--------|---------|-------------|
| `--transport` | `stdio` \| `http` | `stdio` | Transport protocol to use |
| `--port` | number | `3000` | Port for HTTP transport (only with `--transport http`) |
| `--api-key` | string | - | API key for authentication (only with `--transport stdio`) |

### Examples

**HTTP transport on port 8080:**

```bash
npx @upstash/context7-mcp --transport http --port 8080
```

**stdio transport with API key:**

```bash
npx @upstash/context7-mcp --transport stdio --api-key YOUR_API_KEY
```

<Note>
- The `--api-key` flag is not allowed when using `--transport http`. Use header-based authentication instead.
- The `--port` flag is not allowed when using `--transport stdio`.
</Note>

## Authentication

### API Keys

Context7 supports optional API key authentication for:

- Higher rate limits
- Access to private repositories
- Usage tracking

Get your API key at [context7.com/dashboard](https://context7.com/dashboard).

### Header Support

For HTTP transport, the server checks the following headers in order:

1. `Authorization: Bearer <token>`
2. `Context7-API-Key: <key>`
3. `X-API-Key: <key>`
4. `context7-api-key: <key>`
5. `x-api-key: <key>`

## Error Handling

The server returns descriptive error messages for common scenarios:

| Error Code | Description |
|------------|-------------|
| 401 | Unauthorized - Invalid or missing API key |
| 404 | Library not found - Invalid library ID |
| 429 | Rate limited - Too many requests |
| 500 | Internal server error |

## Rate Limits

- **Without API key**: Limited requests per IP
- **With API key**: Higher limits based on your plan

## Proxy Support

Context7 automatically detects and uses HTTP/HTTPS proxy settings from environment variables:

- `HTTPS_PROXY` / `https_proxy`
- `HTTP_PROXY` / `http_proxy`

See [How To - Using HTTPS Proxy](/how-to#using-https-proxy) for configuration details.

## Development

### Running Locally

```bash
# Install dependencies
bun i

# Build
bun run build

# Run with stdio transport
bun run dist/index.js --transport stdio --api-key YOUR_API_KEY

# Run with HTTP transport
bun run dist/index.js --transport http --port 3000
```

### Testing with MCP Inspector

```bash
npx -y @modelcontextprotocol/inspector npx @upstash/context7-mcp
```

## Best Practices

1. **Always resolve library IDs first**: Call `resolve-library-id` before `get-library-docs` unless you have an explicit library ID
2. **Use appropriate token limits**: Higher token counts provide more context but consume more resources
3. **Specify topics**: Use the `topic` parameter to focus documentation on specific areas
4. **Handle errors gracefully**: Check for error responses and provide fallback behavior
5. **Cache results**: Consider caching documentation responses to reduce API calls

## Source Code

The Context7 MCP server is open source:

- GitHub: [github.com/upstash/context7](https://github.com/upstash/context7)
- NPM: [@upstash/context7-mcp](https://www.npmjs.com/package/@upstash/context7-mcp)
